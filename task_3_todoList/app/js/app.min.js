"use strict";!function(t){t.fn.TodoList=function(){return this.each(function(t,o){new e(o,t)})};var e=function(){function e(e,l){this.allTodosHtmlElement=t(".todos-list"),this.taskInputHtmlElement=t(".task-input"),this.allTaskButton=t(".all-tasks-btn"),this.completedTaskButton=t(".completed-tasks-btn"),this.unCompletedTaskButton=t(".uncompleted-tasks-btn"),this.todoManagerHtmlElement=t(".todo-manager"),this.allTodos=t(".todo-manager"),this.localStorageService=new o(l),this.targetElement=null,this.action=null,this.buildTodosList(),this.initializeTodoManagerEvents(),this.initializeTodosListEvents()}function l(t){return""!==t||(alert("enter some text"),!1)}function s(t){for(var e=0;e<t.length;e++)"edit-mode"===t[e].className&&t[e].removeClass("edit-mode")}function a(){return"_"+Math.random().toString(36).substr(2,9)}function i(t,e){t.addClass("active-filter"),e.forEach(function(t){t.removeClass("active-filter")})}return e.prototype.initializeTodosListEvents=function(){var t=this;this.allTodosHtmlElement.click(function(e){t.targetElement=e.target,"checkbox"===t.targetElement.getAttribute("type")?t.switchStatusTodo(t.targetElement):"edit"===t.targetElement.getAttribute("class")?t.editTodo(t.targetElement):"delete"===t.targetElement.getAttribute("class")?t.removeTodo(t.targetElement):"cancel"===t.targetElement.getAttribute("class")&&t.cancelEditing(t.targetElement)})},e.prototype.cancelEditing=function(t){var e=t.parentNode;e.classList.remove("edit-mode")},e.prototype.removeTodo=function(t){var e=t.parentNode.getAttribute("id");this.localStorageService.removeById(e),t.parentNode.remove()},e.prototype.editTodo=function(t){var e=t.parentNode,o=e.querySelector("input[type=text]"),s=e.querySelector("input[type=checkbox]"),a=e.querySelector("label"),i=e.classList.contains("edit-mode"),n="";if(s.checked!==!0){if(n=o.value,i){if(a.innerText!==n){if(!l(n))return;a.innerText=n,this.localStorageService.editTextTodo(n,e.id)}}else o.value=a.innerText;e.classList.toggle("edit-mode")}},e.prototype.switchStatusTodo=function(t){t.checked?(console.log(t.parentNode),t.parentNode.classList.add("completed-task"),this.localStorageService.editStatusTodo(t.parentNode.id,!0)):(t.parentNode.classList.remove("completed-task"),this.localStorageService.editStatusTodo(t.parentNode.id,!1))},e.prototype.initializeTodoManagerEvents=function(){var t=this;this.todoManagerHtmlElement.click(function(e){t.targetElement=e.target,t.action=t.targetElement.getAttribute("data-action"),t.action&&t[t.action]()})},e.prototype.addNewTodo=function(){var t=this.taskInputHtmlElement.val(),e=a();this.taskInputHtmlElement.value="",l(t)&&(this.localStorageService.addNewTodo({todoText:t,checked:!1,id:e}),this.allTodosHtmlElement.append(this.listItemGenerator(t,!1,e)))},e.prototype.applyUncompletedTaskFilter=function(){i(this.unCompletedTaskButton,[this.completedTaskButton,this.allTaskButton]),s(this.allTodosHtmlElement.children()),this.hideCompletedTodos()},e.prototype.applyCompletedTaskFilter=function(){i(this.completedTaskButton,[this.unCompletedTaskButton,this.allTaskButton]),this.allTodosHtmlElement.removeClass("uncompleted-tasks"),this.allTodosHtmlElement.addClass("completed-tasks")},e.prototype.hideCompletedTodos=function(){this.allTodosHtmlElement.removeClass("completed-tasks"),this.allTodosHtmlElement.addClass("uncompleted-tasks")},e.prototype.showTodosList=function(){i(this.allTaskButton,[this.unCompletedTaskButton,this.completedTaskButton]),this.allTodos=this.localStorageService.getAllTodos(),this.allTodosHtmlElement.removeClass("uncompleted-tasks"),this.allTodosHtmlElement.removeClass("completed-tasks"),s(this.allTodosHtmlElement.children())},e.prototype.buildTodosList=function(){this.allTodos=this.localStorageService.getAllTodos();var t=document.createDocumentFragment();for(var e in this.allTodos)t.append(this.listItemGenerator(this.allTodos[e].todoText,this.allTodos[e].checked,this.allTodos[e].id));this.allTodosHtmlElement.append(t)},e.prototype.listItemGenerator=function(t,e,o){var l,s,a,i,n,d,r;return l=document.createElement("li"),s=document.createElement("input"),a=document.createElement("label"),i=document.createElement("input"),n=document.createElement("button"),r=document.createElement("button"),d=document.createElement("button"),s.type="checkbox",i.type="text",n.innerText="Edit",n.className="edit",d.innerText="Delete",d.className="delete",r.innerText="Cancel",r.className="cancel",a.innerText=t,l.id=o,l.append(s),l.append(a),l.append(i),l.append(n),l.append(r),l.append(d),e===!0?(l.classList.add("completed-task"),s.checked=!0):s.checked=!1,l},e}(),o=function(){function t(t){this.allTodos=[],this.pluginNumber=t,this.dataBaseName="allTodos"+t}function e(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}return t.prototype.writeDataToLocalStorage=function(t){localStorage.setItem(this.dataBaseName,JSON.stringify(t))},t.prototype.getAllTodos=function(){var t=localStorage.getItem(this.dataBaseName);return null!==t&&(this.allTodos=JSON.parse(t)),this.allTodos},t.prototype.getAllCompletedTodos=function(){return this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(t){return t.checked===!0}),this.allTodos},t.prototype.getAllUncompletedTodos=function(){return this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(t){return t.checked===!1}),this.allTodos},t.prototype.addNewTodo=function(t){this.allTodos=this.getAllTodos(),this.allTodos.push(t),this.writeDataToLocalStorage(this.allTodos)},t.prototype.removeById=function(t){this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(e){return e.id!==t}),this.writeDataToLocalStorage(this.allTodos)},t.prototype.editTextTodo=function(t,e){this.allTodos=this.getAllTodos(),this.allTodos.forEach(function(o){if(o.id===e)return void(o.todoText=t)}),this.writeDataToLocalStorage(this.allTodos)},t.prototype.editStatusTodo=function(t,e){this.allTodos=this.getAllTodos(),this.allTodos.forEach(function(o){if(o.id===t)return void(o.checked=e)}),this.writeDataToLocalStorage(this.allTodos)},e()?t:new Error("localStorage is not available")}()}(jQuery);
//# sourceMappingURL=../maps/app.min.js.map
