"use strict";!function(){var t=function(){function t(t,o){this.allTodosHtmlElement=t.getElementsByClassName("todos-list")[0],this.taskInputHtmlElement=t.getElementsByClassName("task-input")[0],this.todoManagerHtmlElement=t.getElementsByClassName("todo-manager")[0],this.allTaskButton=t.getElementsByClassName("all-tasks-btn")[0],this.completedTaskButton=t.getElementsByClassName("completed-tasks-btn")[0],this.unCompletedTaskButton=t.getElementsByClassName("uncompleted-tasks-btn")[0],this.allTodos=t.getElementsByClassName("todo-manager")[0],this.localStorageService=new e(o),this.targetElement=null,this.action=null,this.buildTodosList(),this.initializeTodoManagerEvents(),this.initializeTodosListEvents()}function o(t){return""!==t||(alert("enter some text"),!1)}function l(t){for(var e=0;e<t.length;e++)"edit-mode"===t[e].className&&t[e].classList.remove("edit-mode")}function s(){return"_"+Math.random().toString(36).substr(2,9)}return t.prototype.initializeTodosListEvents=function(){var t=this;this.allTodosHtmlElement.addEventListener("click",function(e){t.targetElement=e.target,"checkbox"===t.targetElement.getAttribute("type")?t.switchStatusTodo(t.targetElement):"edit"===t.targetElement.getAttribute("class")?t.editTodo(t.targetElement):"delete"===t.targetElement.getAttribute("class")?t.removeTodo(t.targetElement):"cancel"===t.targetElement.getAttribute("class")&&t.cancelEditing(t.targetElement)})},t.prototype.cancelEditing=function(t){var e=t.parentNode;e.classList.remove("edit-mode")},t.prototype.removeTodo=function(t){var e=t.parentNode.getAttribute("id");this.localStorageService.removeById(e),t.parentNode.remove()},t.prototype.editTodo=function(t){var e=t.parentNode,l=e.querySelector("input[type=text]"),s=e.querySelector("input[type=checkbox]"),a=e.querySelector("label"),i=e.classList.contains("edit-mode"),n="";if(s.checked!==!0){if(n=l.value,i){if(a.innerText!==n){if(!o(n))return;a.innerText=n,this.localStorageService.editTextTodo(n,e.id)}}else l.value=a.innerText;e.classList.toggle("edit-mode")}},t.prototype.switchStatusTodo=function(t){t.checked?(t.parentNode.classList.add("completed-task"),this.localStorageService.editStatusTodo(t.parentNode.id,!0)):(t.parentNode.classList.remove("completed-task"),this.localStorageService.editStatusTodo(t.parentNode.id,!1))},t.prototype.initializeTodoManagerEvents=function(){var t=this;this.todoManagerHtmlElement.addEventListener("click",function(e){t.targetElement=e.target,t.action=t.targetElement.getAttribute("data-action"),t.action&&t[t.action]()})},t.prototype.addNewTodo=function(){var t=this.taskInputHtmlElement.value,e=s();this.taskInputHtmlElement.value="",o(t)&&(this.localStorageService.addNewTodo({todoText:t,checked:!1,id:e}),this.allTodosHtmlElement.appendChild(this.listItemGenerator(t,!1,e)))},t.prototype.applyUncompletedTaskFilter=function(){this.allTaskButton.classList.remove("active-filter"),this.completedTaskButton.classList.remove("active-filter"),this.unCompletedTaskButton.classList.add("active-filter"),l(this.allTodosHtmlElement.childNodes),this.hideCompletedTodos()},t.prototype.applyCompletedTaskFilter=function(){this.allTaskButton.classList.remove("active-filter"),this.unCompletedTaskButton.classList.remove("active-filter"),console.log(this.unCompletedTaskButton),this.completedTaskButton.classList.add("active-filter"),this.allTodosHtmlElement.classList.remove("uncompleted-tasks"),this.allTodosHtmlElement.classList.add("completed-tasks")},t.prototype.hideCompletedTodos=function(){this.allTodosHtmlElement.classList.remove("completed-tasks"),this.allTodosHtmlElement.classList.add("uncompleted-tasks")},t.prototype.showTodosList=function(){this.allTaskButton.classList.add("active-filter"),this.completedTaskButton.classList.remove("active-filter"),this.unCompletedTaskButton.classList.remove("active-filter"),this.allTodos=this.localStorageService.getAllTodos(),this.allTodosHtmlElement.classList.remove("uncompleted-tasks"),this.allTodosHtmlElement.classList.remove("completed-tasks"),l(this.allTodosHtmlElement.childNodes)},t.prototype.buildTodosList=function(){this.allTodos=this.localStorageService.getAllTodos();var t=document.createDocumentFragment();for(var e in this.allTodos)t.appendChild(this.listItemGenerator(this.allTodos[e].todoText,this.allTodos[e].checked,this.allTodos[e].id));this.allTodosHtmlElement.appendChild(t)},t.prototype.listItemGenerator=function(t,e,o){var l,s,a,i,n,d,r;return l=document.createElement("li"),s=document.createElement("input"),a=document.createElement("label"),i=document.createElement("input"),n=document.createElement("button"),r=document.createElement("button"),d=document.createElement("button"),s.type="checkbox",i.type="text",n.innerText="Edit",n.className="edit",d.innerText="Delete",d.className="delete",r.innerText="Cancel",r.className="cancel",a.innerText=t,l.id=o,l.appendChild(s),l.appendChild(a),l.appendChild(i),l.appendChild(n),l.appendChild(r),l.appendChild(d),e===!0?(l.classList.add("completed-task"),s.checked=!0):s.checked=!1,l},t}(),e=function(){function t(t){this.allTodos=[],this.pluginNumber=t,this.dataBaseName="allTodos"+t}function e(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}return t.prototype.writeDataToLocalStorage=function(t){localStorage.setItem(this.dataBaseName,JSON.stringify(t))},t.prototype.getAllTodos=function(){var t=localStorage.getItem(this.dataBaseName);return null!==t&&(this.allTodos=JSON.parse(t)),this.allTodos},t.prototype.getAllCompletedTodos=function(){return this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(t){return t.checked===!0}),this.allTodos},t.prototype.getAllUncompletedTodos=function(){return this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(t){return t.checked===!1}),this.allTodos},t.prototype.addNewTodo=function(t){this.allTodos=this.getAllTodos(),this.allTodos.push(t),this.writeDataToLocalStorage(this.allTodos)},t.prototype.removeById=function(t){this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(e){return e.id!==t}),this.writeDataToLocalStorage(this.allTodos)},t.prototype.editTextTodo=function(t,e){this.allTodos=this.getAllTodos(),console.log(t),this.allTodos.forEach(function(o){if(o.id===e)return void(o.todoText=t)}),this.writeDataToLocalStorage(this.allTodos)},t.prototype.editStatusTodo=function(t,e){this.allTodos=this.getAllTodos(),this.allTodos.forEach(function(o){if(o.id===t)return void(o.checked=e)}),this.writeDataToLocalStorage(this.allTodos)},e()?t:new Error("localStorage is not available")}(),o=document.getElementsByClassName("todo-plugin");Array.prototype.forEach.call(o,function(e,o){new t(e,o)})}();
//# sourceMappingURL=../maps/app.min.js.map
