"use strict";!function(){var t=function(){function t(){this.allTodosHtmlElement=document.getElementsByClassName("todos-list")[0],this.taskInputHtmlElement=document.getElementsByClassName("task-input")[0],this.todoManagerHtmlElement=document.getElementsByClassName("todo-manager")[0],this.allTodos=document.getElementsByClassName("todo-manager")[0],this.initelizeManagerComponentEvents(this.todoManagerHtmlElement),this.initelizeTodosListEvents(this.allTodosHtmlElement),this.localStorageService=new e,this.targetElement,this.action}function o(t){return""!==t||(alert("enter some text"),!1)}function l(){return"_"+Math.random().toString(36).substr(2,9)}return t.prototype.initelizeTodosListEvents=function(t){var e=this;t.addEventListener("click",function(t){e.targetElement=t.target,"checkbox"===e.targetElement.getAttribute("type")?e.changeStatusTodo(e.targetElement):"edit"===e.targetElement.getAttribute("class")?e.editTodo(e.targetElement):"delete"===e.targetElement.getAttribute("class")?e.removeTodo(e.targetElement):"cancel"===e.targetElement.getAttribute("class")&&e.cencelEditing(e.targetElement)})},t.prototype.cencelEditing=function(t){var e=t.parentNode;e.classList.toggle("editMode")},t.prototype.removeTodo=function(t){var e=t.parentNode.getAttribute("id");this.localStorageService.removeById(e),t.parentNode.remove()},t.prototype.editTodo=function(t){var e=t.parentNode,l=e.querySelector("input[type=text]"),s=e.querySelector("input[type=checkbox]"),i=e.querySelector("label"),n=e.classList.contains("editMode"),a="";if(s.checked!==!0)if(a=l.value,n){if(i.innerText=a,i.innerText!==a){if(!o(a))return;this.localStorageService.editTextTodo(a,e.id)}}else l.value=i.innerText;e.classList.toggle("editMode")},t.prototype.changeStatusTodo=function(t){t.checked?(t.nextSibling.style.textDecoration="line-through",t.parentNode.classList.add("completed-task"),this.localStorageService.editStatusTodo(t.parentNode.id,!0)):(t.parentNode.classList.remove("completed-task"),t.nextSibling.style.textDecoration="none",this.localStorageService.editStatusTodo(t.parentNode.id,!1))},t.prototype.initelizeManagerComponentEvents=function(t){var e=this;t.addEventListener("click",function(t){e.targetElement=t.target,e.action=e.targetElement.getAttribute("data-action"),e.action&&e[e.action]()})},t.prototype.addNewTodo=function(){var t=this.taskInputHtmlElement.value;this.taskInputHtmlElement.value="",o(t)&&(this.localStorageService.addNewTodo({todoText:t,checked:!1,id:l()}),this.allTodosHtmlElement.appendChild(this.listItemGenerator(t,!1)))},t.prototype.hideUncompletedTodos=function(){this.allTodosHtmlElement.classList.remove("uncompleted-tasks"),this.allTodosHtmlElement.classList.add("completed-tasks")},t.prototype.hideCompletedTodos=function(){this.allTodosHtmlElement.classList.remove("completed-tasks"),this.allTodosHtmlElement.classList.add("uncompleted-tasks")},t.prototype.showTodosList=function(){this.allTodos=this.localStorageService.getAllTodos(),this.allTodosHtmlElement.classList.remove("uncompleted-tasks"),this.allTodosHtmlElement.classList.remove("completed-tasks")},t.prototype.buildTodosList=function(){this.allTodos=this.localStorageService.getAllTodos();var t=document.createDocumentFragment();for(var e in this.allTodos)t.appendChild(this.listItemGenerator(this.allTodos[e].todoText,this.allTodos[e].checked,this.allTodos[e].id));this.allTodosHtmlElement.appendChild(t)},t.prototype.listItemGenerator=function(t,e,o){var l,s,i,n,a,d,r;return l=document.createElement("li"),s=document.createElement("input"),i=document.createElement("label"),n=document.createElement("input"),a=document.createElement("button"),r=document.createElement("button"),d=document.createElement("button"),s.type="checkbox",n.type="text",a.innerText="Edit",a.className="edit",d.innerText="Delete",d.className="delete",r.innerText="Cancel",r.className="cancel",i.innerText=t,l.id=o,l.appendChild(s),l.appendChild(i),l.appendChild(n),l.appendChild(a),l.appendChild(r),l.appendChild(d),e===!0?(l.classList.add("completed-task"),s.checked=!0):s.checked=!1,l},t}(),e=function(){function t(){this.allTodos=[]}function e(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}return t.prototype.writeDataToLocalStorage=function(t){localStorage.setItem("allTodos",JSON.stringify(t))},t.prototype.getAllTodos=function(){var t=localStorage.getItem("allTodos");return null!==t&&(this.allTodos=JSON.parse(t)),this.allTodos},t.prototype.getAllCompletedTodos=function(){return this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(t){return t.checked===!0}),this.allTodos},t.prototype.getAllUncompletedTodos=function(){return this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(t){return t.checked===!1}),this.allTodos},t.prototype.addNewTodo=function(t){this.allTodos=this.getAllTodos(),this.allTodos.push(t),this.writeDataToLocalStorage(this.allTodos)},t.prototype.removeById=function(t){this.allTodos=this.getAllTodos(),this.allTodos=this.allTodos.filter(function(e){return e.id!==t}),this.writeDataToLocalStorage(this.allTodos)},t.prototype.editTextTodo=function(t,e){this.allTodos=this.getAllTodos(),this.allTodos.forEach(function(o){if(o.id===e)return void(o.todoText=t)}),this.writeDataToLocalStorage(this.allTodos)},t.prototype.editStatusTodo=function(t,e){this.allTodos=this.getAllTodos(),this.allTodos.forEach(function(o){if(o.id===t)return void(o.checked=e)}),this.writeDataToLocalStorage(this.allTodos)},e()?t:new Error("localStorage is not available")}(),o=new t;o.buildTodosList()}();
//# sourceMappingURL=../maps/app.min.js.map
